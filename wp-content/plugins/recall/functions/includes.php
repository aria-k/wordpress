<?phpfunction array_multisort_key_rcl($array, $key, $type = SORT_ASC, $cmp_func = 'strcmp'){    $GLOBALS['ARRAY_MULTISORT_KEY_SORT_KEY']  = $key;    usort($array, create_function('$a, $b', '$k = &$GLOBALS["ARRAY_MULTISORT_KEY_SORT_KEY"];        return ' . $cmp_func . '($a[$k], $b[$k]) * ' . ($type == SORT_ASC ? 1 : -1) . ';'));    return $array;}function a_active($param1,$param2){	if($param1==$param2) return 'class=active';}function get_names_array_rcl($objects,$name_data){	global $wpdb;	foreach((array)$objects as $object){        if(++$a>1)$userslst .= ',';        $userslst .= $object->$name_data;    }		$display_names = $wpdb->get_results("SELECT ID,display_name FROM ".$wpdb->prefix."users WHERE ID IN ($userslst)");		foreach((array)$display_names as $name){		$names[$name->ID] = $name->display_name;	}	return $names;}function get_redirect_url_rcl($url,$id_tab=null){	$ar_perm = explode('?',$url);	$cnt = count($ar_perm);	if($cnt>1) $a = '&';	else $a = '?';	$url = $url.$a;	if($id_tab) $url = $url.'view='.$id_tab;	return $url;}function last_user_action_recall($user_action){	$time_action = current_time('mysql');				$unix_time_action = strtotime($time_action);	$unix_time_user = strtotime($user_action);		if(!$user_action) 		return $last_go = 'уже давно';	if($unix_time_action > $unix_time_user+300){		$sec = $unix_time_action - $unix_time_user;		$day = $sec/86400;		$time = floor($day);		if($time == 0){			$time = floor($sec/3600);				if($time == 0){					$time = floor($sec/60);					$last_go = 'уже'.' '.$time.' '.'мин.';						} else {					$last_go = 'уже'.' '.$time.' '.'ч.';				}			} else {				if($time<30){					$last_go = 'уже'.' '.$time.' '.'дн.';				}else{					$last_go = 'уже давно';				}			}			return 	$last_go;	} else {		return false;	}}function rcl_update_timeaction_user(){	global $user_ID;	global $wpdb;		$rcl_current_action = $wpdb->get_var("SELECT time_action FROM ".RCL_PREF."user_action WHERE user='$user_ID'");		$last_action = last_user_action_recall($rcl_current_action);	if($last_action){		$time = current_time('mysql');		$res = $wpdb->update( 					RCL_PREF.'user_action', 					array( 'time_action' => $time ), 					array( 'user' => $user_ID )				);				if(!isset($res)||$res==0){			$act_user = $wpdb->get_var("SELECT COUNT(time_action) FROM ".RCL_PREF."user_action WHERE user ='$user_ID'");			if($act_user==0){				$wpdb->insert(					RCL_PREF.'user_action',					array( 'user' => $user_ID,					'time_action'=> $time )				);			}			if($act_user>1){				$wpdb->query("DELETE FROM ".RCL_PREF."user_action WHERE user ='$user_ID'");			}		}	}	do_action('rcl_update_timeaction_user',$user_ID,$time);}?>